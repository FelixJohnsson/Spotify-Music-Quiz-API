<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Room test</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>
    <button onclick="init_new_room()">Init new room</button>
    <div id="room_output">

    </div>
</body>
<script>
    const init_new_room = () => {
        const body = {
            URI:'2Ob2rWWwZxbz6yWuTmBd6T',
            token: 'BQDYx4EkV0eXJR2YRKLwQEJ1I3-C5FqB27rKwAVGGZJ3p9D5-pPn_57qQ-f90BDJGRbkIDZhuifP0bo6_2MUZT0XACxIFuVe4JgjQUP30LYcffvqNi0p8rD5jCj_GEYyXp5m47A2VV8p2ZmcB2II8trJI6Gjwe8g10TEra4D6sfWZalLlzHhyluhWK34WhoYkkkd8MGnfr-NP01QFo8Ulq5me_lrXOBtvgr5FEKIMRVmTks7LCVqjvozD-akHngrLcna-l2c1gd-1Pw44DAljTw',
            id:'felle21'
        }
        fetch('http://localhost:5000/init_new_room', {
                method: 'POST',
                headers: {
                    'content-type': 'application/json'
                },
                body: JSON.stringify(body)
            })
            .then(res => res.json())
            .then(data => {
                console.log(data)
                const div = document.getElementById('room_output');
                const p = document.createElement('p');
                p.style.fontSize = '20px';
                const id = document.createTextNode('Room number: ' + data.content.id);
                p.appendChild(id);
                div.appendChild(p);

                
                data.content.songs.forEach(object => {
                    const img = document.createElement('img');
                    img.src = object.track.album.images[0].url;
                    img.style.height = '100px';
                    div.appendChild(img);

                    const track_name_t = document.createTextNode('Song name: ' + object.track.name + ' by: ' + object.track.artists[0].name);
                    const track_name_p = document.createElement('p')
                    track_name_p.appendChild(track_name_t);
                    div.appendChild(track_name_p);
                })
            })
    }
</script>
</html>