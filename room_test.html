<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Room test</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>
    <button onclick="init_new_room()">Init new room</button>
    <button onclick="increment_room()">Increment room</button>
    <button onclick="pause_room()">Pause room</button>
    <button onclick="unpause_room()">Unpause room</button>
    <div id="room_output">

    </div>
</body>
<script>
    const init_new_room = () => {
        const body = {
            URI:'2Ob2rWWwZxbz6yWuTmBd6T',
            token: 'BQAiV5cX9X-sSqqN_OO6YMymoIrwxKT4E0f2P_x-uWjjkVG7NqtJP1e_W2CZDkr9D5VXXuZEYkCyd7Mn2iQhQCJ5kjMmTVt068YSAL2M36LUfR9hRuaj98EdkDdyPAAujpED4jiWyTtoanVbxDG5uGqbfIjjaQIzTRiPzABw7oRNBaV6wleYr3SEd-S6x_rMOmebmJAh4UiaJApgLz9c5tteyabiGosKz11mRevrBCswmeEl96N8TxAZ5lt9Nf4isF2CZ-yHuTcS5EtG88oqkFU',
            id:'felle21'
        }
        fetch('http://localhost:5000/init_new_room', {
                method: 'POST',
                headers: {
                    'content-type': 'application/json'
                },
                body: JSON.stringify(body)
            })
            .then(res => res.json())
            .then(data => {
                console.log(data)
                const div = document.getElementById('room_output');
                const p = document.createElement('p');
                p.style.fontSize = '20px';
                const id = document.createTextNode('Room number: ' + data.content.id);
                p.appendChild(id);
                div.appendChild(p);

                
                data.content.songs.forEach(object => {
                    const img = document.createElement('img');
                    img.src = object.track.album.images[0].url;
                    img.style.height = '100px';
                    div.appendChild(img);

                    const track_name_t = document.createTextNode('Song name: ' + object.track.name + ' by: ' + object.track.artists[0].name);
                    const track_name_p = document.createElement('p')
                    track_name_p.appendChild(track_name_t);
                    div.appendChild(track_name_p);
                })
            })
    }
    const increment_room = () => {
        const body = {
            token: 'BQB-frxRKerbavs7L9rSwJ5z83ex5Gfl9VPxjrXQHRdtPux7tEz2K3iKL1TJ2lVDaPk_6ne6HmlnCF_auufl2GPkvpD4hoUfl9hJmMm6VtQkYqiTERThD4iHxTkeNtfV6njjtKJERCP4CxDsHcjzGV1skFrLQYH-CoJkwzdBqV_bx50Y2CZqyuwbFG1HRR7RF6G-KbefsIuS74sp4Tyx0Fs3y0vmLQV5vyHw0NPm9xKu4YcnVdwYhSQ0TCxd41kFhLTDA4GdXPwvqaSRpboa53U',
            id:'felle21',
            room_id: '1',
            type: 'Increment room',
            value: null
        }
        fetch('http://localhost:5000/update_room', {
                method: 'POST',
                headers: {
                    'content-type': 'application/json'
                },
                body: JSON.stringify(body)
            })
            .then(res => res.json())
            .then(data => {
                console.log(data);
            })
    }
    const pause_room = () => {
        const body = {
            token: 'BQB-frxRKerbavs7L9rSwJ5z83ex5Gfl9VPxjrXQHRdtPux7tEz2K3iKL1TJ2lVDaPk_6ne6HmlnCF_auufl2GPkvpD4hoUfl9hJmMm6VtQkYqiTERThD4iHxTkeNtfV6njjtKJERCP4CxDsHcjzGV1skFrLQYH-CoJkwzdBqV_bx50Y2CZqyuwbFG1HRR7RF6G-KbefsIuS74sp4Tyx0Fs3y0vmLQV5vyHw0NPm9xKu4YcnVdwYhSQ0TCxd41kFhLTDA4GdXPwvqaSRpboa53U',
            id:'felle21',
            room_id: '1',
            type: 'Pause',
            value: 10000
        }
        fetch('http://localhost:5000/update_room', {
                method: 'POST',
                headers: {
                    'content-type': 'application/json'
                },
                body: JSON.stringify(body)
            })
            .then(res => res.json())
            .then(data => {
                console.log(data);
            })
    }
    const unpause_room = () => {
        const body = {
            token: 'BQB-frxRKerbavs7L9rSwJ5z83ex5Gfl9VPxjrXQHRdtPux7tEz2K3iKL1TJ2lVDaPk_6ne6HmlnCF_auufl2GPkvpD4hoUfl9hJmMm6VtQkYqiTERThD4iHxTkeNtfV6njjtKJERCP4CxDsHcjzGV1skFrLQYH-CoJkwzdBqV_bx50Y2CZqyuwbFG1HRR7RF6G-KbefsIuS74sp4Tyx0Fs3y0vmLQV5vyHw0NPm9xKu4YcnVdwYhSQ0TCxd41kFhLTDA4GdXPwvqaSRpboa53U',
            id:'felle21',
            room_id: '1',
            type: 'Unpause',
            value: null
        }
        fetch('http://localhost:5000/update_room', {
                method: 'POST',
                headers: {
                    'content-type': 'application/json'
                },
                body: JSON.stringify(body)
            })
            .then(res => res.json())
            .then(data => {
                console.log(data);
            })
    }
</script>
</html>